{"remainingRequest":"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/babel-loader/lib/index.js!/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/eslint-loader/index.js??ref--13-0!/Applications/XAMPP/xamppfiles/htdocs/hivqavue/src/store/modules/user.js","dependencies":[{"path":"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/src/store/modules/user.js","mtime":1567594828757},{"path":"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/cache-loader/dist/cjs.js","mtime":1567594824838},{"path":"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/babel-loader/lib/index.js","mtime":1567594824769},{"path":"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/eslint-loader/index.js","mtime":1567594825725}],"contextDependencies":[],"result":["import _defineProperty from \"/Applications/XAMPP/xamppfiles/htdocs/hivqavue/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nvar _mutations;\n\nimport Vue from 'vue';\nimport apiCall from '../../utils/api';\nimport { AUTH_LOGOUT } from '../actions/auth';\nimport { USER_REQUEST, USER_ERROR, USER_SUCCESS } from '../actions/user';\nvar state = {\n  status: '',\n  profile: {}\n};\nvar getters = {\n  getProfile: function getProfile(state) {\n    return state.profile;\n  },\n  isProfileLoaded: function isProfileLoaded(state) {\n    return !!state.profile.name;\n  }\n};\n\nvar actions = _defineProperty({}, USER_REQUEST, function (_ref) {\n  var commit = _ref.commit,\n      dispatch = _ref.dispatch;\n  commit(USER_REQUEST);\n  apiCall({\n    url: '/api/get-user',\n    method: 'GET'\n  }).then(function (resp) {\n    commit(USER_SUCCESS, resp);\n  }).catch(function (resp) {\n    commit(USER_ERROR);\n    dispatch(AUTH_LOGOUT);\n    window.location.reload(true);\n  });\n});\n\nvar mutations = (_mutations = {}, _defineProperty(_mutations, USER_REQUEST, function (state) {\n  state.status = 'loading';\n}), _defineProperty(_mutations, USER_SUCCESS, function (state, resp) {\n  state.status = 'success';\n  Vue.set(state, 'profile', resp);\n}), _defineProperty(_mutations, USER_ERROR, function (state) {\n  state.status = 'error';\n}), _defineProperty(_mutations, AUTH_LOGOUT, function (state) {\n  state.profile = {};\n}), _mutations);\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/hivqavue/src/store/modules/user.js"],"names":["Vue","apiCall","AUTH_LOGOUT","USER_REQUEST","USER_ERROR","USER_SUCCESS","state","status","profile","getters","getProfile","isProfileLoaded","name","actions","commit","dispatch","url","method","then","resp","catch","window","location","reload","mutations","set"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,YAAnC,QAAuD,iBAAvD;AAEA,IAAMC,KAAK,GAAG;AAAEC,EAAAA,MAAM,EAAE,EAAV;AAAcC,EAAAA,OAAO,EAAE;AAAvB,CAAd;AAEA,IAAMC,OAAO,GAAG;AACdC,EAAAA,UAAU,EAAE,oBAAAJ,KAAK;AAAA,WAAIA,KAAK,CAACE,OAAV;AAAA,GADH;AAEdG,EAAAA,eAAe,EAAE,yBAAAL,KAAK;AAAA,WAAI,CAAC,CAACA,KAAK,CAACE,OAAN,CAAcI,IAApB;AAAA;AAFR,CAAhB;;AAKA,IAAMC,OAAO,uBACVV,YADU,EACK,gBAAwB;AAAA,MAAtBW,MAAsB,QAAtBA,MAAsB;AAAA,MAAdC,QAAc,QAAdA,QAAc;AACtCD,EAAAA,MAAM,CAACX,YAAD,CAAN;AAEAF,EAAAA,OAAO,CAAC;AAACe,IAAAA,GAAG,EAAE,eAAN;AAAuBC,IAAAA,MAAM,EAAE;AAA/B,GAAD,CAAP,CACGC,IADH,CACQ,UAAAC,IAAI,EAAI;AACZL,IAAAA,MAAM,CAACT,YAAD,EAAec,IAAf,CAAN;AACD,GAHH,EAIGC,KAJH,CAIS,UAAAD,IAAI,EAAI;AACbL,IAAAA,MAAM,CAACV,UAAD,CAAN;AACAW,IAAAA,QAAQ,CAACb,WAAD,CAAR;AACAmB,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;AACD,GARH;AASD,CAbU,CAAb;;AAgBA,IAAMC,SAAS,iDACZrB,YADY,EACG,UAACG,KAAD,EAAW;AACzBA,EAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACD,CAHY,+BAIZF,YAJY,EAIG,UAACC,KAAD,EAAQa,IAAR,EAAiB;AAC/Bb,EAAAA,KAAK,CAACC,MAAN,GAAe,SAAf;AACAP,EAAAA,GAAG,CAACyB,GAAJ,CAAQnB,KAAR,EAAe,SAAf,EAA0Ba,IAA1B;AACD,CAPY,+BAQZf,UARY,EAQC,UAACE,KAAD,EAAW;AACvBA,EAAAA,KAAK,CAACC,MAAN,GAAe,OAAf;AACD,CAVY,+BAWZL,WAXY,EAWE,UAACI,KAAD,EAAW;AACxBA,EAAAA,KAAK,CAACE,OAAN,GAAgB,EAAhB;AACD,CAbY,cAAf;AAgBA,eAAe;AACbF,EAAAA,KAAK,EAALA,KADa;AAEbG,EAAAA,OAAO,EAAPA,OAFa;AAGbI,EAAAA,OAAO,EAAPA,OAHa;AAIbW,EAAAA,SAAS,EAATA;AAJa,CAAf","sourcesContent":["import Vue from 'vue'\nimport apiCall from '../../utils/api'\nimport { AUTH_LOGOUT } from '../actions/auth'\nimport { USER_REQUEST, USER_ERROR, USER_SUCCESS } from '../actions/user'\n\nconst state = { status: '', profile: {}}\n\nconst getters = {\n  getProfile: state => state.profile,\n  isProfileLoaded: state => !!state.profile.name,\n}\n\nconst actions = {\n  [USER_REQUEST]: ({commit, dispatch}) => {\n    commit(USER_REQUEST)\n\n    apiCall({url: '/api/get-user', method: 'GET' })\n      .then(resp => {\n        commit(USER_SUCCESS, resp)\n      })\n      .catch(resp => {\n        commit(USER_ERROR)\n        dispatch(AUTH_LOGOUT)\n        window.location.reload(true);\n      })\n  },\n}\n\nconst mutations = {\n  [USER_REQUEST]: (state) => {\n    state.status = 'loading'\n  },\n  [USER_SUCCESS]: (state, resp) => {\n    state.status = 'success'\n    Vue.set(state, 'profile', resp)\n  },\n  [USER_ERROR]: (state) => {\n    state.status = 'error'\n  },\n  [AUTH_LOGOUT]: (state) => {\n    state.profile = {}\n  }\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations,\n}\n"]}]}